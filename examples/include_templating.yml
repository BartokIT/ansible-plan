---
options:
  vault_script: vault_script_test.py
templating:
  first_var: "first_hostname {{ external_template_1 }}"
  overridden_var: original
defaults:
  inventory: inventory.ini
workflow:
  - id: 1
    templating:
      second_var: second_hostname
    block:
      - id: 1.1
        import_playbook: playbooks/first.yml
        limit: "vars 1.1 {{ first_var }},{{ second_var }},{{ overridden_var }}"
      - id: 1.2
        import_playbook: playbooks/second.yml
  - id: 2
    project_path: project1
    import_playbook: playbooks/project1.yml
  - id: 3
    import_playbook: playbooks/encrypted.yml
    vault_ids:
      - V1
  - id: 4
    templating:
      second_var: second_hostname
      overridden_var: overridden
    block:
      - id: 4.1
        import_playbook: playbooks/encrypted.yml
        limit: "vars 4.1 {{ first_var }},{{ second_var }},{{ overridden_var }}"
        vault_ids:
          - V1
      - id: 4.2
        import_playbook: playbooks/fourth.yml
  - id: 5
    block:
      - id: 5.1
        import_playbook: "playbooks/{{ external_template_2 }}.yml"
        limit: "vars 5.1  {{ first_var }},{{ external_template_3 }},{{ overridden_var }}"
        vault_ids:
          - V1
      - id: 5.2
        import_playbook: playbooks/fourth.yml
      - id: 5.3
        include_block: _to_be_imported2.yml
        templating:
          second_var: "{{ first_var }} prova"
          overridden_var: overridden